# üìê –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–∏–¥–æ–≤ (phuketmua.site)

**–ü—Ä–æ–µ–∫—Ç:** phuketmua.site  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 2026  

---

## 1Ô∏è‚É£ –û–±—â–∞—è —Å—Ö–µ–º–∞

```mermaid
graph TD
    User([–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å]) --> Site[–°–∞–π—Ç phuketmua.site]
    Site -- "POST /lead (JSON)" --> Worker[Cloudflare Worker]
    Worker --> TG[Telegram Bot]
    Worker --> Resend[Resend API]
    TG --> TGChat[Telegram Chat]
    Resend --> Email[Email gardsale@mail.ru]
```

---

## 2Ô∏è‚É£ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### üåê –§—Ä–æ–Ω—Ç–µ–Ω–¥
- **–î–æ–º–µ–Ω:** phuketmua.site
- **–ú–µ—Ç–æ–¥:** POST
- **–§–æ—Ä–º–∞—Ç:** JSON
- **–ü–æ–ª—è:**
  - `wechat` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)
  - `utm_source`
  - `utm_medium`
  - `utm_campaign`
  - `utm_content`
  - `utm_term`

### ‚öôÔ∏è Backend ‚Äî Cloudflare Worker
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:** Cloudflare
- **–¢–∏–ø:** Edge Function
- **–§—É–Ω–∫—Ü–∏–∏:**
  - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç POST JSON.
  - –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –ø–æ–ª–µ `wechat`.
  - –î–æ–±–∞–≤–ª—è–µ—Ç timestamp (Asia/Bangkok).
  - –§–æ—Ä–º–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç –ª–∏–¥–∞.
  - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ Telegram –∏ Email —á–µ—Ä–µ–∑ Resend.
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON `{ success: true }`.

### ü§ñ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:** Telegram
- **API:** Bot API
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** `BOT_TOKEN`, `CHAT_ID`.
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–º –ª–∏–¥–µ.

### üìß Email –æ—Ç–ø—Ä–∞–≤–∫–∞
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:** Resend
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** `RESEND_API_KEY`, –¥–æ–º–µ–Ω `phuketmua.site` (verified).
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è, –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ.

---

## 3Ô∏è‚É£ DNS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
–£ –¥–æ–º–µ–Ω–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã:
- **SPF:** `v=spf1 include:_spf.google.com include:mailchannels.net include:resend.com ~all`
- **DKIM (–æ—Ç Resend):** 3 CNAME –∑–∞–ø–∏—Å–∏.

---

## 4Ô∏è‚É£ Environment Variables (Worker)
| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| :--- | :--- |
| `BOT_TOKEN` | –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ |
| `CHAT_ID` | ID —á–∞—Ç–∞/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram |
| `RESEND_API_KEY` | API –∫–ª—é—á —Å–µ—Ä–≤–∏—Å–∞ Resend |

---

## 5Ô∏è‚É£ –ü–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞
1. –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST JSON.
2. Worker –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –º–µ—Ç–æ–¥, Content-Type –∏ –Ω–∞–ª–∏—á–∏–µ `wechat`.
3. –§–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —Ç–µ–∫—Å—Ç –ª–∏–¥–∞.
4. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è `sendTelegram()` –∏ `sendEmail()`.
5. –ï—Å–ª–∏ –æ–±–∞ —É—Å–ø–µ—à–Ω—ã ‚Üí `success: true`.
6. –û—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ Worker Logs.

---

## 6Ô∏è‚É£ –ó–∞—â–∏—Ç–∞
- **–¢–µ–∫—É—â–∞—è:** CORS –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –¥–æ–º–µ–Ω–æ–º, –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç–æ–¥–∞/JSON, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ `wechat`.
- **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ (v2):** Honeypot –ø–æ–ª–µ, Rate limit –ø–æ IP, Cloudflare Turnstile.

---

## 7Ô∏è‚É£ –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å
–°–∏—Å—Ç–µ–º–∞ —É—Å—Ç–æ–π—á–∏–≤–∞, —Ç–∞–∫ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ "edge" (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±–ª–∏–∑–∫–æ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Telegram –∫–∞–∫ –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –∫–∞–Ω–∞–ª –∏ Email –∫–∞–∫ —Ä–µ–∑–µ—Ä–≤–Ω—ã–π. –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.

---

## 8Ô∏è‚É£ –¢–æ—á–∫–∏ –æ—Ç–∫–∞–∑–∞
- **Telegram:** –ë–æ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –∏–ª–∏ —É–ø–∞–ª API.
- **Resend:** –î–æ–º–µ–Ω –Ω–µ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω –∏–ª–∏ –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç.
- **DNS:** –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π SPF/DKIM.
- **Worker:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

---

## 9Ô∏è‚É£ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
–õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å:
- –ó–∞–ø–∏—Å—å –≤ Google Sheets / Supabase.
- Webhook –≤ CRM.
- Meta Conversion API.
- –ê–≤—Ç–æ–æ—Ç–≤–µ—Ç –∫–ª–∏–µ–Ω—Ç—É.

---

## üîü –ò—Ç–æ–≥–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –º–æ–¥–µ–ª—å
–≠—Ç–æ **serverless lead-capture —Å–∏—Å—Ç–µ–º–∞** –±–µ–∑ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞, –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ —Ö–æ—Å—Ç–∏–Ω–≥–∞. –ü–æ–ª–Ω–æ—Å—Ç—å—é edge-based.

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Å—Ç–∏–ª—å:** Event-driven edge processing.
